#bash cli functions

function portCheck { sudo netstat -tapen | grep ":$1 "; }
export -f portCheck
 
function portOpen { sudo iptables -A INPUT -p tcp --dport $1 -j ACCEPT; }
export -f portOpen

function portListen { sudo netstat -ntlp | grep LISTEN; }
export -f portListen

function vimclean { rm -r **/*.swp; }
export -f vimclean



# $ sudo echo "colorscheme:wgallios" >> /etc/multitail.conf
# adds fake scheme to multitail conf
function log { multitail -C -f /var/log/$1/$1.log; }
export -f log

alias wmongo='mongodb -u wgallios -p kornman1 --authenticationDatabase admin'

_log () {
    local cur=${COMP_WORDS[COMP_CWORD]}
    local ldir=/var/www
    COMPREPLY=( $(compgen -W "$(ls $ldir)" -- $cur) )
}

complete -F _log log

_cdw () {
    local cur=${COMP_WORDS[COMP_CWORD]}
    local pdir=/var/www
    COMPREPLY=( $(compgen -W "$(ls $pdir)" -- $cur) )
}

complete -F _cdw cdw

function cdw { cd /var/www/$1; }
export -f cdw


# for editing ~/bashrc/ files

_bsh () {
    local cur=${COMP_WORDS[COMP_CWORD]}
    local pdir=~/bashrc
    COMPREPLY=( $(compgen -W "$(ls $pdir)" -- $cur) )
}

complete -F _bsh bsh

function bsh {
    
    if [[ -n $1 ]];
    then
        echo "Editing ~/bashrc/$1"
        vim + -c "set filetype=sh" ~/bashrc/$1;
    else
        echo "Editing ~/.bashrc"
        vim + ~/.bashrc;
    fi


}
export -f bsh


function grp {
    echo "Searching: $@"
    grep -r -i -n $1 $2
}
export -f grp
